"""AI-–ø–æ–º–æ—â–Ω–∏–∫ –ö–∞–Ω–∞–ª–¢–µ—Ö–°–µ—Ä–≤–∏—Å - –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤."""
import re
import logging

logger = logging.getLogger(__name__)

COMPANY_INFO = {
    "name": "–ö–∞–Ω–∞–ª–¢–µ—Ö–°–µ—Ä–≤–∏—Å",
    "city": "–Ø—Ä—Ü–µ–≤–æ",
    "phone": "+7 (910) 555-84-14",
    "hours": "24/7",
}

KNOWLEDGE_BASE = {
    "prices": {
        "keywords": ["—Ü–µ–Ω", "—Å—Ç–æ–∏–º", "—Å–∫–æ–ª—å–∫–æ", "–ø—Ä–∞–π—Å", "—Ç–∞—Ä–∏—Ñ", "–¥–æ—Ä–æ–≥–æ", "–¥–µ—à–µ–≤"],
        "response": (
            "üí∞ <b>–ù–∞—à–∏ —Ü–µ–Ω—ã:</b>\n\n"
            "üöö <b>–û—Ç–∫–∞—á–∫–∞ —Å–µ–ø—Ç–∏–∫–∞:</b>\n"
            "‚Ä¢ –î–æ 5–º¬≥ ‚Äî –æ—Ç 2 500‚ÇΩ\n"
            "‚Ä¢ –î–æ 10–º¬≥ ‚Äî –æ—Ç 4 500‚ÇΩ\n"
            "‚Ä¢ –°–≤—ã—à–µ 10–º¬≥ ‚Äî –æ—Ç 6 000‚ÇΩ\n\n"
            "üöΩ <b>–ü—Ä–æ—á–∏—Å—Ç–∫–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–∏:</b>\n"
            "‚Ä¢ –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è ‚Äî –æ—Ç 1 500‚ÇΩ\n"
            "‚Ä¢ –ì–∏–¥—Ä–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è ‚Äî –æ—Ç 3 000‚ÇΩ\n\n"
            "üîç <b>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:</b>\n"
            "‚Ä¢ –í–∏–¥–µ–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ‚Äî –æ—Ç 2 000‚ÇΩ\n\n"
            "üìû –¢–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Ç–æ—á–Ω—è–π—Ç–µ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: +7 (910) 555-84-14"
        )
    },
    "timing": {
        "keywords": ["–≤—Ä–µ–º—è", "—Å—Ä–æ–∫", "–∫–æ–≥–¥–∞", "–±—ã—Å—Ç—Ä", "–¥–æ–ª–≥–æ", "–∂–¥–∞—Ç—å", "–ø—Ä–∏–µ–¥"],
        "response": (
            "‚è∞ <b>–°—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</b>\n\n"
            "‚Ä¢ –û—Ç–∫–∞—á–∫–∞ —Å–µ–ø—Ç–∏–∫–∞ ‚Äî –≤—ã–µ–∑–¥ –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 —á–∞—Å–æ–≤\n"
            "‚Ä¢ –ü—Ä–æ—á–∏—Å—Ç–∫–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –≤ –¥–µ–Ω—å –æ–±—Ä–∞—â–µ–Ω–∏—è\n"
            "‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ‚Äî –ø–æ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏\n\n"
            "üö® <b>–°—Ä–æ—á–Ω—ã–π –≤—ã–∑–æ–≤</b> ‚Äî –≤—ã–µ–∑–¥ –≤ —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞!\n\n"
            "üìû –ó–≤–æ–Ω–∏—Ç–µ: +7 (910) 555-84-14"
        )
    },
    "area": {
        "keywords": ["—Ä–∞–π–æ–Ω", "–∑–æ–Ω", "–≥–æ—Ä–æ–¥", "–æ–±–ª–∞—Å—Ç—å", "–≤—ã–µ–∑–¥", "—è—Ä—Ü–µ–≤–æ", "—Å–º–æ–ª–µ–Ω—Å–∫", "–ø—Ä–∏–µ–∑–∂–∞"],
        "response": (
            "üìç <b>–ó–æ–Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è:</b>\n\n"
            "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –≤ –≥. –Ø—Ä—Ü–µ–≤–æ –∏ –ø–æ –≤—Å–µ–π –°–º–æ–ª–µ–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏.\n\n"
            "‚úÖ –í—ã–µ–∑–∂–∞–µ–º –≤ –ª—é–±–æ–π —Ä–∞–π–æ–Ω\n"
            "‚úÖ –£–¥–∞–ª—ë–Ω–Ω—ã–µ –Ω–∞—Å–µ–ª—ë–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã ‚Äî –ø–æ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏\n\n"
            "üìû –£—Ç–æ—á–Ω–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–µ–∑–¥–∞: +7 (910) 555-84-14"
        )
    },
    "payment": {
        "keywords": ["–æ–ø–ª–∞—Ç", "–∫–∞—Ä—Ç", "–Ω–∞–ª–∏—á", "–ø–µ—Ä–µ–≤–æ–¥", "–±–µ–∑–Ω–∞–ª", "—Å—á—ë—Ç", "—Å—á–µ—Ç"],
        "response": (
            "üí≥ <b>–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</b>\n\n"
            "‚Ä¢ –ù–∞–ª–∏—á–Ω—ã–µ\n"
            "‚Ä¢ –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É\n"
            "‚Ä¢ –ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç (–¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π)\n\n"
            "üìù –í—ã–¥–∞—ë–º —á–µ–∫–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏.\n\n"
            "üìû –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–ø–ª–∞—Ç—ã: +7 (910) 555-84-14"
        )
    },
    "services": {
        "keywords": ["—É—Å–ª—É–≥", "–¥–µ–ª–∞–µ—Ç", "—Ä–∞–±–æ—Ç", "–ø–æ–º–æ—â", "–º–æ–∂–µ—Ç–µ", "—É–º–µ–µ—Ç"],
        "response": (
            "üìã <b>–ù–∞—à–∏ —É—Å–ª—É–≥–∏:</b>\n\n"
            "üöö –û—Ç–∫–∞—á–∫–∞ —Å–µ–ø—Ç–∏–∫–æ–≤ –∏ –≤—ã–≥—Ä–µ–±–Ω—ã—Ö —è–º\n"
            "üöΩ –ü—Ä–æ—á–∏—Å—Ç–∫–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–∏\n"
            "üîç –í–∏–¥–µ–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç—Ä—É–±\n"
            "üßπ –ü—Ä–æ–º—ã–≤–∫–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–∏\n\n"
            "–†–∞–±–æ—Ç–∞–µ–º —Å —á–∞—Å—Ç–Ω—ã–º–∏ –¥–æ–º–∞–º–∏, –¥–∞—á–∞–º–∏ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏.\n\n"
            "üìû –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: +7 (910) 555-84-14"
        )
    },
    "guarantee": {
        "keywords": ["–≥–∞—Ä–∞–Ω—Ç", "–∫–∞—á–µ—Å—Ç–≤", "–Ω–∞–¥—ë–∂", "–Ω–∞–¥–µ–∂"],
        "response": (
            "‚úÖ <b>–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞:</b>\n\n"
            "‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ –≤—Å–µ –≤–∏–¥—ã —Ä–∞–±–æ—Ç ‚Äî –¥–æ 6 –º–µ—Å—è—Ü–µ–≤\n"
            "‚Ä¢ –û–ø—ã—Ç–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã\n"
            "‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ\n"
            "‚Ä¢ –ê–∫–∫—É—Ä–∞—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç–µ\n\n"
            "üìû +7 (910) 555-84-14"
        )
    },
    "order": {
        "keywords": ["–∑–∞–∫–∞–∑", "–∑–∞—è–≤–∫", "–æ—Ñ–æ—Ä–º", "–≤—ã–∑–æ–≤", "–≤—ã–∑–≤–∞—Ç—å"],
        "response": (
            "üìù <b>–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É:</b>\n\n"
            "1Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ ¬´–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É¬ª –≤ –º–µ–Ω—é\n"
            "2Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É\n"
            "3Ô∏è‚É£ –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –∏ —Ç–µ–ª–µ—Ñ–æ–Ω\n\n"
            "–ò–ª–∏ –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º: üìû +7 (910) 555-84-14\n\n"
            "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º 24/7!"
        )
    },
    "contact": {
        "keywords": ["–∫–æ–Ω—Ç–∞–∫—Ç", "—Ç–µ–ª–µ—Ñ–æ–Ω", "—Å–≤—è–∑", "–ø–æ–∑–≤–æ–Ω", "–Ω–∞–ø–∏—Å–∞", "–∞–¥—Ä–µ—Å"],
        "response": (
            "üìû <b>–ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã:</b>\n\n"
            "üì± –¢–µ–ª–µ—Ñ–æ–Ω: +7 (910) 555-84-14\n"
            "üèô –ì–æ—Ä–æ–¥: –Ø—Ä—Ü–µ–≤–æ, –°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å\n"
            "‚è∞ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: 24/7\n\n"
            "–ó–≤–æ–Ω–∏—Ç–µ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è ‚Äî –º—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏!"
        )
    }
}

DEFAULT_RESPONSE = (
    "ü§î –ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª –≤–∞—à –≤–æ–ø—Ä–æ—Å, –Ω–æ —Å —Ä–∞–¥–æ—Å—Ç—å—é –ø–æ–º–æ–≥—É!\n\n"
    "–í—ã –º–æ–∂–µ—Ç–µ:\n"
    "‚Ä¢ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É —á–µ—Ä–µ–∑ –º–µ–Ω—é\n"
    "‚Ä¢ –ü–æ–∑–≤–æ–Ω–∏—Ç—å –Ω–∞–º: üìû +7 (910) 555-84-14\n\n"
    "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º 24/7 –∏ –æ—Ç–≤–µ—Ç–∏–º –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã!"
)


def get_ai_response(user_message: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    message_lower = user_message.lower()
    
    for category, data in KNOWLEDGE_BASE.items():
        for keyword in data["keywords"]:
            if keyword in message_lower:
                logger.info(f"AI matched category: {category}")
                return data["response"]
    
    return DEFAULT_RESPONSE
